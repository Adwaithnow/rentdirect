(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74592],{75153:function(e,t,r){var n={"./auth/event-list.ts":[25932,25932],"./bottom-navigation/event-list.ts":[22616,22616],"./search/event-list.ts":[83064,83064],"./where-can-i-live/event-list.ts":[21122,21122]};function a(e){if(!r.o(n,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],a=t[0];return r.e(t[1]).then(function(){return r(a)})}a.keys=function(){return Object.keys(n)},a.id=75153,e.exports=a},68782:function(e,t,r){"use strict";r.d(t,{d:function(){return f}});var n=r(49857),a=r(58141),o=r(34595),u=r(65007),c=r(2784),i=r(47203),l=r(74815);let s=()=>{let[e,t]=(0,c.useState)(l.V.getToken());return(0,c.useEffect)(()=>i.e.subscribe(e=>{e?t(l.V.getToken()):t(null)}),[]),e};var d=r(29480),p=r(26672);let f=e=>t=>{let r=e=>t.handledByPfWebApp?origin:"".concat(o.g?"https://"+(0,a.Z)((0,u._)()).replace("www.","staging."):origin,"/").concat(e),c=e.requireAuth?(0,p.L)({getOrigin:e=>r(e),jwtTokenService:e.jwtTokenService,requireAuth:!0})(t):(0,p.L)({getOrigin:e=>r(e),requireAuth:!1})(t);return r=>{let a=d.O.getLocale(),o=s(),u=!r.swrDoNotFetch;u&&e.requireAuth&&!o&&(u=!1);let i="".concat(a,"-").concat(t.url,"-").concat(t.method).concat(r.query?"-"+JSON.stringify(r.query):"").concat(r.swrKeyPostfix?"-"+r.swrKeyPostfix:""),l=(0,n.ZP)(u?i:null,()=>c({...r,locale:a}),{revalidateOnFocus:!1,revalidateOnReconnect:!1});return l.isValidating||!l.data?{ok:null}:l.data}}},84915:function(e,t,r){"use strict";r.d(t,{$:function(){return o}});var n=r(74815),a=r(68782);let o=(0,a.d)({requireAuth:!0,jwtTokenService:n.V})},35867:function(e,t,r){"use strict";r.d(t,{W:function(){return L}});var n=r(52322),a=r(34541),o=r(36561),u=r(9738),c=r(29480);let i=(0,o.d)({method:"POST",url:"contacted-property",handledByPfWebApp:!0,alterHeaders:e=>{e["content-type"]="application/vnd.api+json"}}),l=async e=>{let{propertyId:t,contactType:r,contactDate:n}=e,a=c.O.getLocale(),o={property_id:t,contact_type:r||u.g.CALL,contact_date:n};return i({locale:a,postData:{data:{type:"contacted_property",attributes:o}}})};var s=r(84915);let d=()=>(0,s.$)({method:"GET",url:"contacted-property",handledByPfWebApp:!0})({});var p=r(2784),f=r(85949),v=r(8914),y=r(59462);let A=e=>{let{localStorage:t}=y.WindowService,r=t.getItem(e)||[];return r.map(e=>(0,a.objectReduce)(e,(e,t,r)=>({...e,[(0,v.B)(t.toString())]:r}),{}))};var h=r(29894);let g=e=>e.split("").map((e,t)=>e.toUpperCase()===e?"".concat(0!==t?"_":"").concat(e.toLowerCase()):e).join(""),E=(e,t)=>{let{localStorage:r}=y.WindowService;r.setItem(e,t.map(e=>(0,a.objectReduce)(e,(e,t,r)=>({...e,[g(t.toString())]:r}),{})))},C=(e,t)=>r=>{let n=A(e),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>JSON.stringify(e),r={};return e.filter(e=>{let n=t(e);return!r[n]&&(r[n]=!0,!0)})}(r.concat(n),e=>e.propertyId),o=n.filter(e=>{let{propertyId:t}=e;return!r.find(e=>e.propertyId===t)});return(0,h.Q)(r,n,(e,t)=>e.propertyId===t.propertyId?0:-1)||(E(e,a),o.forEach(t)),a},S=(e,t,r,n,o)=>{let{user:u}=(0,p.useContext)(f.S),c=(0,a.usePrevious)(u),i=C(e,n),l=t.ok?t.data:[],[s,d]=(0,p.useState)(A(e));return(0,p.useEffect)(()=>{if(u!==c&&u&&t.ok){let e=i(l.map(r));d(e)}},[u,t.ok,l]),(0,p.useEffect)(()=>{u===c||u||d([])},[u,c]),[s,function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=A(e).filter(e=>e.propertyId!==t.propertyId).concat(t);E(e,a),u&&n(t),r&&d(a)},t=>{let r=A(e).filter(e=>e.propertyId!==t.propertyId);E(e,r),u&&o&&o(t),d(r)}]};var _=r(50787),I=r(91728);let L=e=>{let{children:t}=e,r=d(),[o,u]=S(I.k,r,e=>{let{propertyId:t,contactType:r,contactDate:n}=e;return{propertyId:t,contactType:r,contactDate:n}},l);return(0,n.jsx)(_.$.Provider,{value:{data:o,add:(e,t,r)=>{let n={propertyId:e,contactType:t,contactDate:(0,a.dateToRfc)(new Date)};return u(n,r),n}},children:t})}},50787:function(e,t,r){"use strict";r.d(t,{$:function(){return o}});var n=r(2784),a=r(9738);let o=(0,n.createContext)({data:[],add:()=>({propertyId:0,contactType:a.g.CALL,contactDate:""})})},9738:function(e,t,r){"use strict";var n,a;r.d(t,{g:function(){return n}}),(a=n||(n={})).CALL="CALL",a.WHATSAPP="WHATSAPP",a.SMS="SMS",a.EMAIL="EMAIL",a.CALL_BACK="CALL_BACK"},84657:function(e,t,r){"use strict";r.d(t,{G:function(){return I}});var n,a,o=r(52322),u=r(436),c=r(2784),i=r(80315),l=r(19049),s=r(56506);let d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=c.useState({completed:!1}),a=e.filter(e=>!t[e]),o=(0,c.useContext)(i.o),{abTests:u}=(0,s.A)(),{t:d}=(0,l.$)();return c.useEffect(()=>{async function e(){let e=await Promise.all(a.map(e=>r(75153)("./".concat(e,"/event-list.ts"))));n(e.reduce((e,t,r)=>{let n=Object.keys(t)[0],c={filtersValueFromQuery:o.value,filtersData:o.data,abTests:u,t:d},i=t[n](c);return e[a[r]]=i,e},{...t,completed:!0}))}a.length&&(n({...t,...a.reduce((e,t)=>(e[t]="fetching",e),{})}),e())},[a]),t};(n=a||(a={})).AUTH="auth",n.SEARCH="search",n.WHERE_CAN_I_LIVE="where-can-i-live",n.BOTTOM_NAVIGATION="bottom-navigation";var p=r(25237),f=r.n(p),v=r(38421),y=r.n(v),A=r(25601),h=r(14133),g=r(85949),E=r(44089),C=r(92337),S=r(19260);let _=f()(()=>Promise.all([r.e(49857),r.e(89090),r.e(59406)]).then(r.bind(r,89090)).then(e=>e.AuthUnifiedModalComponent),{loadableGenerated:{webpack:()=>[89090]},ssr:!1}),I=()=>{let{t:e}=(0,l.$)(),[t,r]=(0,c.useState)(!1),[n,i]=(0,c.useState)(null),{pageUrl:p}=(0,s.A)(),f=d([a.AUTH]),v=(0,c.useCallback)(()=>{var e,t;r(!0),null===(t=f.auth)||void 0===t||null===(e=t.onLoginModalOpen)||void 0===e||e.call(t,S.J.HEADER)},[f.completed]),I=(0,c.useContext)(g.S),L=(0,c.useContext)(h.H);(0,c.useEffect)(()=>i((0,C.d)(I.user)),[I.user]);let T=(0,c.useMemo)(()=>({"find-agent":[E.u.FIND_AGENT_LANDING,E.u.AGENT_DETAIL,E.u.FIND_BROKER_SEARCH,E.u.FIND_AGENT_SEARCH,E.u.FIND_BROKER_LANDING,E.u.BROKER_DETAIL].includes(p)}),[p]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.Gt,{activePageUrls:T,savedPropertiesCount:L.data.length,user:n,onLoginClick:v}),t&&(0,o.jsx)(_,{valueProposition:e("auth/email-verification-title"),onClose:()=>r(!1),onSuccess:()=>r(!1),children:(0,o.jsx)(y(),{src:(0,A.Y)("/icons/account-benefits.svg"),layout:"fixed",width:141,height:100})})]})}},4255:function(e,t,r){"use strict";r.d(t,{C:function(){return A}});var n=r(52322),a=r(34541),o=r(2784),u=r(36561),c=r(29480);let i=(0,u.d)({method:"POST",url:"saved-property",handledByPfWebApp:!0,alterHeaders:e=>{e["content-type"]="application/vnd.api+json"}}),l=async e=>{let{propertyId:t,saveDate:r}=e,n=c.O.getLocale();return i({locale:n,postData:{data:{type:"saved_property",attributes:{property_id:t,save_date:r}}}})};var s=r(84915);let d=e=>(0,s.$)({method:"GET",url:"saved-property",handledByPfWebApp:!0})({swrKeyPostfix:e.toString()}),p=e=>(0,u.d)({method:"DELETE",url:"saved-property/".concat(e),handledByPfWebApp:!0}),f=e=>{let{propertyId:t}=e,r=c.O.getLocale();return p(t.toString())({locale:r})};var v=r(85949),y=r(14133);let A=e=>{let{children:t}=e,{user:r}=(0,o.useContext)(v.S),[u,c]=(0,o.useState)(0),i=d(u),[s,p]=(0,o.useState)([]);return(0,o.useEffect)(()=>{i.ok&&p(i.data)},[i.ok]),(0,o.useEffect)(()=>{r||p([])},[r]),(0,n.jsx)(y.H.Provider,{value:{data:s,save:e=>{let t={propertyId:parseInt(e,10),saveDate:(0,a.dateToRfc)(new Date)};l(t).then(()=>c(e=>e+1)),p(e=>[...e,t])},unSave:e=>{let t=parseInt(e,10);f({propertyId:t}).then(()=>c(e=>e+1)),p(e=>e.filter(e=>e.propertyId!==t))}},children:t})}},14133:function(e,t,r){"use strict";r.d(t,{H:function(){return a}});var n=r(2784);let a=(0,n.createContext)({data:[],save:()=>null,unSave:()=>null})},29894:function(e,t,r){"use strict";function n(e,t){var r;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e-t;return e.length===(null===(r=t)||void 0===r?void 0:r.length)&&(e=e.slice().sort(n),t=t.slice().sort(n),e.every((e,r)=>0===n(t[r],e)))}r.d(t,{Q:function(){return n}})},92337:function(e,t,r){"use strict";r.d(t,{d:function(){return a}});var n=r(8914);let a=e=>{if(null==e)return e;if(Array.isArray(e))return e.map(e=>a(e));if("object"==typeof e){let t={};for(let[r,o]of Object.entries(e)){let e=(0,n.B)(r);t[e]="object"==typeof o?a(o):o}return t}return e}},65007:function(e,t,r){"use strict";r.d(t,{_:function(){return A}});var n=r(20120),a=r(61296),o=r(68081),u=r(6660),c=r(34406);let i={areaUnit:a.q.SQM,language:{current:u.z.EN,alternative:u.z.AR}},l={language:{current:u.z.AR,alternative:u.z.EN}},s={...i,areaUnit:a.q.SQFT,countryCode:"ae",currencyCode:o.B.AED,defaultCategory:n.l.RESIDENTIAL_FOR_RENT},d={...i,countryCode:"bh",currencyCode:o.B.BHD,defaultCategory:n.l.RESIDENTIAL_FOR_SALE},p={...i,countryCode:"qa",currencyCode:o.B.QAR,defaultCategory:n.l.RESIDENTIAL_FOR_RENT},f={...i,...l,countryCode:"eg",currencyCode:o.B.EGP,defaultCategory:n.l.RESIDENTIAL_FOR_SALE},v={...i,...l,countryCode:"sa",currencyCode:o.B.SAR,defaultCategory:n.l.RESIDENTIAL_FOR_SALE},y=new Map([["ae",s],["bh",d],["eg",f],["qa",p],["sa",v]]);function A(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.env.NEXT_PUBLIC_COUNTRY_CODE;return y.get("".concat(e))||s}}}]);