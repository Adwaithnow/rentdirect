(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[90006],{87817:function(e,t,a){"use strict";a.d(t,{I:function(){return o}});var n=a(52322),l=a(2784),i=a(45163),r=a(54048),s=a(18007);let o=e=>{let{showPagination:t=!0,showViewAllButton:a}=e,{data:o,isLoading:u,editFormField:c}=(0,l.useContext)(r.x);return(0,n.jsx)(i.c,{data:o.agents,isLoading:u,meta:o.meta,showPagination:t,showViewAllButton:a,onPaginationClick:e=>c(s.t.PAGE_NUMBER,{label:"",value:String(e)})})}},45163:function(e,t,a){"use strict";a.d(t,{c:function(){return P}});var n=a(52322),l=a(22114),i=a(34541),r=a(33318),s=a(25237),o=a.n(s),u=a(2784),c=a(41693),d=a(19049),g=a(70435),_=a(83480),v=a(25601),p=a(54048),m=a(46423),f=a(29480);let h=e=>"/".concat(f.O.getLocale()).concat(c.b.agent,"/").concat(e.slug,"-").concat(e.id);var A=a(90030),b=a.n(A);let E=(0,m.M)(),I=e=>{var t,a;let{agent:l,preload:r,fullWidth:s}=e,{t:o}=(0,d.$)(),{localContext:c}=(0,u.useContext)(p.x),_=l.propertiesResidentialForSaleCount+l.propertiesCommercialForSaleCount,m=l.propertiesResidentialForRentCount+l.propertiesCommercialForRentCount,f="Agent ".concat(l.name," with ").concat(m," properties for rent and ").concat(_," properties for sale"),{ref:A}=(0,i.useImpression)(()=>{E.impression(l,c)}),I=(0,u.useCallback)(()=>{E.click(l)},[l.id]);return(0,n.jsx)("li",{ref:A,className:(0,i.domClassMerge)(b().item,{[b()["full-width"]]:s}),onClick:I,"data-testid":"list-card",children:(0,n.jsxs)(g.W,{link:h(l),title:l.name,logo:{url:(null===(t=l.broker.logo)||void 0===t?void 0:t.links.mobile)||(0,v.Y)("/images/broker-image-placeholder.jpg"),alt:l.broker.name},isSuperAgent:l.superagent,subTitle:l.position,preload:r,image:(null===(a=l.image)||void 0===a?void 0:a.links.desktop)||(0,v.Y)("/images/agent-image-placeholder.jpg"),propertiesForSale:_,propertiesForRent:m,ariaLabel:f,children:[(0,n.jsx)(g.W.Feature,{name:o("FindAgent_Nationality"),value:l.nationality.name}),(0,n.jsx)(g.W.Feature,{name:o("Languages"),value:l.languages.map(e=>e.name).join(", ")})]})})};var y=a(89027),N=a(14894),R=a.n(N);let S=o()(()=>a.e(7535).then(a.bind(a,7535)).then(e=>e.NotFound),{loadableGenerated:{webpack:()=>[7535]},ssr:!0}),P=e=>{let{showPagination:t,isLoading:a=!0,onPaginationClick:s,showViewAllButton:o,meta:u,data:v,fullWidth:p}=e,{t:m,locale:f}=(0,d.$)(),h=v.length||y.e.defaultSearchItemsPerPage;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{"data-testid":"AgentList",className:R().container,children:[(0,n.jsx)("ul",{className:R().list,"aria-label":"Matching agents",role:"list",children:a?(0,i.arrayFromRange)(0,h).map(e=>(0,n.jsx)("li",{"data-testid":"AgentList-skeleton",className:R().list__item,children:(0,n.jsx)(g.W.Skeleton,{})},"list-skeleton-".concat(e))):null==v?void 0:v.map((e,t)=>(0,n.jsx)(I,{agent:e,preload:t<4,fullWidth:p},"agent-card-".concat(e.name,"-").concat(t)))}),!a&&0===v.length&&(0,n.jsx)("div",{className:R().notFound,"data-testid":"agent-list-not-found",children:(0,n.jsx)(S,{messageKey:m("FindAgent_NoResults")})})]}),u.totalPages>1&&t&&(0,n.jsx)("div",{className:R()["pagination-container"],children:(0,n.jsx)(_._,{className:R().pagination,currentPage:u.page,pagesAvailable:u.totalPages,loading:a,total:u.total,limit:y.e.defaultSearchItemsPerPage,showPages:!0,onPageClick:s})}),o&&(0,n.jsx)("div",{className:R().viewAll,children:(0,n.jsx)(r.r,{href:"/".concat(f).concat(c.b.search_agent),children:(0,n.jsx)(l.z,{theme:"primary",type:"submit","aria-label":"View all agent",children:m("FindAgent_ViewAll")})})})]})}},81868:function(e,t,a){"use strict";a.d(t,{Q:function(){return B}});var n=a(52322),l=a(54048),i=a(34541),r=a(5632),s=a(2784),o=a(41693),u=a(65707),c=a(76089),d=a(18007),g=a(19049),_=a(29480);let v=e=>{let{t}=(0,g.$)(),a=(0,s.useMemo)(()=>[{value:"/".concat(_.O.getLocale(),"/find-agent"),label:t("FindAgent_Agents")},{value:"/".concat(_.O.getLocale(),"/find-broker"),label:t("FindAgent_Companies")}],[]),n=(0,s.useMemo)(()=>[{label:t("FindAgent_ServiceNeeded"),value:""},{label:t("FindAgent_ResidentialForSale"),value:"1"},{label:t("FindAgent_ResidentialForRent"),value:"2"},{label:t("FindAgent_CommercialForSale"),value:"3"},{label:t("FindAgent_CommercialForRent"),value:"4"}],[]);return(0,s.useMemo)(()=>({languages:[{label:t("menu/language"),value:""}].concat(e.languages||[]),nationalities:[{label:t("FindAgent_Nationality"),value:""}].concat(e.nationalities||[]),services:n,modes:a,sort:[{label:t("listing-level/featured"),value:"-trusted_score"},{label:t("PropertiesForSale"),value:"-total_sales_properties"},{label:t("PropertiesForRent"),value:"-total_rental_properties"}]}),[t])};var p=a(94470);let m={[d.t.PAGE_LIMIT]:!0},f=e=>{let t={};return Object.entries(e).forEach(e=>{let[a,n]=e;a in m||!n.value||(t[a]=n.value)}),t},h=(e,t)=>e.reduce((e,a)=>(e[a]=t[a]?t[a]:{value:"",label:""},e),{}),A=(e,t)=>{switch(e){case d.t.LOCATION_ID:return h([d.t.PAGE_NUMBER,d.t.QUERY,d.t.ID],t);case d.t.ID:return h([d.t.PAGE_NUMBER,d.t.QUERY,d.t.LOCATION_ID],t);case d.t.QUERY:return h([d.t.PAGE_NUMBER,d.t.ID,d.t.LOCATION_ID],t);case d.t.PAGE_NUMBER:return h([],t);default:return h([d.t.PAGE_NUMBER],t)}};var b=a(90477),E=a(45962),I=a(3400);let y={label:"",value:""},N=(e,t)=>0===e.length?y:e.find(e=>e.value===t)||e[0],R=async(e,t)=>{let a=e[d.t.LANGUAGE_IDS];return N(t.languages,String(a))},S=async(e,t)=>{let a=e[d.t.NATIONALITY];return N(t.nationalities,String(a))},P=async(e,t)=>{let a=e[d.t.CATEGORY_ID];return N(t.services,String(a))},x=async e=>{let t=e[d.t.QUERY];return t?{label:t,value:t}:y},k=async e=>{let t=e[d.t.ID];if(t){let e=await E.f.findById(t);return e?{label:e.n,value:e.i}:y}return y},C=async e=>{let t=e[d.t.LOCATION_ID];if(t){let e=await I.a.findById(t);return e?{label:[e.a?e.a:e.n,e.p_n?" (".concat(e.p_n,")"):""].join(""),value:e.id}:y}return y},F=async e=>{let t=e[d.t.PAGE_NUMBER];return t?{label:t,value:t}:{label:"1",value:"1"}},L=async e=>{let t=e[d.t.PAGE_LIMIT];return t?{label:t,value:t}:{label:"10",value:"10"}},O=async(e,t)=>{let a=e[d.t.SORT];if(a){var n;return{label:(null===(n=t.sort.find(e=>e.value===a))||void 0===n?void 0:n.label)||"",value:a}}return y},T=async e=>{let t=e[d.t.IS_SUPER_AGENT];return t?{label:t,value:t}:y},j={[d.t.CATEGORY_ID]:P,[d.t.ID]:k,[d.t.IS_SUPER_AGENT]:T,[d.t.LANGUAGE_IDS]:R,[d.t.LOCALE]:()=>Promise.resolve(y),[d.t.LOCATION_ID]:C,[d.t.NATIONALITY]:S,[d.t.PAGE_LIMIT]:L,[d.t.PAGE_NUMBER]:F,[d.t.QUERY]:x,[d.t.SORT]:O,[d.t.BROKER_ID]:()=>Promise.resolve(y),[d.t.MUST_BE_VERIFIED]:()=>Promise.resolve(y),[d.t.MUST_HAVE_PROPERTIES]:()=>Promise.resolve(y)},G=async(e,t)=>{let a={},n=[];return Object.values(d.t).forEach(l=>{let i=j[l];i&&n.push(i(e,t).then(e=>{a[l]=e}))}),await Promise.all(n),a};var w=a(59350),D=a(91979),U=a(56506);let M=e=>{let{filters:t,mode:a,initialData:n}=e,{countryConfigs:l}=(0,U.A)(),g=(0,s.useRef)(!0),_=(0,s.useRef)({...t}),[m,h]=(0,s.useState)(n),[E,I]=(0,s.useState)(!1),y=(0,r.useRouter)(),N=v(n.options),R=(0,u.z)([c.Y.AGENT_SEARCH]),S=async function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=f(e);if(!(!r&&(0,i.objectCompare)(s,_.current))){if(n&&I(!0),"landing"===a){window.location.href=(0,w.B)(o.b.search_agent,s,l);return}_.current=s,await y.push((0,w.B)(o.b.search_agent,s,l)),(0,b.Z)(s).then(e=>{if(I(!1),e&&h(()=>({agents:e.agents,meta:e.meta})),R.completed){var a,n;null===(n=R["agent-search"])||void 0===n||null===(a=n.onLoad)||void 0===a||a.call(n,m.agents,t,N)}})}},[P,x,k]=(0,p.b)({},S),C=(0,s.useCallback)((e,t)=>{k(a=>({...a,...A(e,{[d.t.LANGUAGE_IDS]:N.languages[0],[d.t.NATIONALITY]:N.nationalities[0]}),[e]:t}))},[k,N]),F=(0,s.useCallback)((e,t)=>{x(a=>({...a,...A(e,{[d.t.LANGUAGE_IDS]:N.languages[0],[d.t.NATIONALITY]:N.nationalities[0]}),[e]:t}))},[k,N]);(0,s.useEffect)(()=>{G(t,N).then(e=>{x(t=>({...t,...e}))})},[]);let L=(0,D.r)(m.meta.page,m.meta.total,m.meta.perPage);return(0,s.useEffect)(()=>{"search"!==a||g.current||G(y.query,N).then(e=>{S({...e,page:{label:"",value:String(y.query.page||"")}}),x(t=>({...t,...e}))}),g.current=!1},[JSON.stringify(y.query)]),{editFormField:C,editFormFieldWithoutRequest:F,form:P,isLoading:E,data:m,options:N,forceSearch:()=>S(P,!0,!0),localContext:L}},B=e=>{let{children:t,initialData:a,filters:i,mode:r}=e,s=M({initialData:a,filters:i,mode:r});return(0,n.jsx)(l.x.Provider,{value:s,children:t})}},54048:function(e,t,a){"use strict";a.d(t,{x:function(){return l}});var n=a(2784);let l=(0,n.createContext)({})},13357:function(e,t,a){"use strict";a.d(t,{l:function(){return l}});var n=a(18007);let l=(e,t,a)=>{switch(a){case"agent":return n.t.ID;case"location":return n.t.LOCATION_ID;default:return n.t.QUERY}}},90477:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var n=a(82058);let l=(0,n.h)({method:"GET",url:"agents",handledByPfWebApp:!0,prefixWithApi:!0,prefixWithLocale:!1,responseDataType:"json"}),i=(e,t)=>l({locale:e,dataMapper:e=>{let{rawData:t}=e;return t},query:{...t}});var r=a(29480);let s=async e=>{try{let t=await i(r.O.getLocale(),e);if(t.ok)return t.data;return null}catch(e){return console.error("failed agents loading",e),null}}},11820:function(e,t,a){"use strict";a.d(t,{g:function(){return r}});var n=a(52322),l=a(97729),i=a.n(l);a(2784);let r=e=>{let{schema:t}=e;return(0,n.jsx)(i(),{children:(0,n.jsx)("script",{id:"agent-schema",type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(t)}})})}},94478:function(e,t,a){"use strict";a.d(t,{V:function(){return n}});let n=(e,t,a)=>{var n,l,i;return{agents_ids:(null==e?void 0:e.map(e=>String(e.id)))||[],...(null==t?void 0:t.text)&&{search_agent_keywords:t.text},...(null==t?void 0:t.language_ids)&&{search_agent_languages:(null===(n=a.languages.find(e=>e.value===t.language_ids))||void 0===n?void 0:n.label)||""},...(null==t?void 0:t.nationality)&&{search_agent_nationality:(null===(l=a.nationalities.find(e=>e.value===t.nationality))||void 0===l?void 0:l.label)||""},...(null==t?void 0:t.category_id)&&{search_agent_service:(null===(i=a.services.find(e=>e.value===t.category_id))||void 0===i?void 0:i.label)||""},...(null==t?void 0:t.is_superagent)&&{search_super_agent_first:"1"}}}},90030:function(e){e.exports={item:"styles_item__YzikE","full-width":"styles_full-width__Li7_b"}},14894:function(e){e.exports={list:"styles_desktop_list__iZK8_",list__item:"styles_desktop_list__item__XFB0J",notFound:"styles_desktop_notFound__gpuC3",pagination:"styles_desktop_pagination__PIQlD","pagination-container":"styles_desktop_pagination-container__XHeGa",viewAll:"styles_desktop_viewAll__ySkaG"}}}]);