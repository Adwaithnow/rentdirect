(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8617],{26823:function(e,t,r){"use strict";var o=r(31450),n=function(){function e(e){this.browserStorageService=e}return e.prototype.push=function(e,t){var r=o.uuidGenerate();return this.browserStorageService.setData(this.getKey(e,t),r),r},e.prototype.pop=function(e,t){var r=this.getKey(e,t),o=this.browserStorageService.getData(r);return o?(this.browserStorageService.removeData(r),o):null},e.prototype.getKey=function(t,r){return e.KEY.replace("{entityName}",t).replace("{id}",r)},e.KEY="pf-attribution[{entityName}-{id}]",e}();t.G=n},7461:function(e,t,r){"use strict";var o,n;r.d(t,{T:function(){return o}}),(n=o||(o={})).SORT="sort",n.QUERY="query",n.CATEGORY_ID="filter[category_id]",n.PROPERTY_TYPE_ID="filter[property_type_id]",n.LOCATION_IDS="filter[locations_ids]",n.BEDROOMS="filter[number_of_bedrooms]",n.BATHROOMS="filter[number_of_bathrooms]",n.MIN_PRICE="filter[min_price]",n.MAX_PRICE="filter[max_price]",n.FURNISHING="filter[furnished]",n.MIN_AREA="filter[min_area]",n.MAX_AREA="filter[max_area]",n.PRICE_PERIOD="filter[price_type]",n.KEYWORD="filter[keywords]",n.AMENITIES="filter[amenities]",n.COMPLETION_STATUS="filter[completion_status]",n.EXCLUDE_LOCATIONS_DESCENDANTS="filter[exclude_locations_descendants]",n.EXACT_LOCATION="filter[exact_location]",n.BOUNDING_BOX="filter[bounding_box]",n.GEOHASH_VIEWPORT="filter[geohash_viewport]",n.HASH_BOX="filter[hash_box]",n.UTILITIES_PRICE_TYPE="filter[utilities_price_type]",n.VIRTUAL_VIEWINGS="filter[virtual_viewings]",n.IS_DEVELOPER_PROPERTY="filter[is_developer_property]",n.MIN_INSTALLMENT_YEARS="filter[min_installment_years]",n.MAX_INSTALLMENT_YEARS="filter[max_installment_years]",n.PAGE_NUMBER="page[number]",n.PAGE_LIMIT="page[limit]",n.VERIFIED="filter[verified]",n.SUPER_AGENT="filter[trusted_agent]",n.PROJECT_PHASE="filter[project_phase]",n.CONTRACT_STATUS="filter[contract_status]",n.SOLD_BY="filter[sold_by]",n.LISTED_WITHIN="filter[listed_within]",n.PAYMENT_METHODS="filter[payment_methods]",n.NEW_PROJECTS="filter[new_projects]",n.BROKER_ID="filter[broker_id]",n.DEVELOPER_IDS="filter[developer_id]"},78740:function(e,t,r){"use strict";r.d(t,{q:function(){return o}});let o=10},93131:function(e,t,r){"use strict";var o,n;r.d(t,{Y:function(){return o}}),(n=o||(o={})).ENTER="Enter",n.COMMA=",",n.COMMA_ARABIC="ØŒ",n.UP="ArrowUp",n.DOWN="ArrowDown",n.TAB="Tab",n.BACKSPACE="Backspace"},73044:function(e,t,r){"use strict";r.d(t,{W:function(){return o}});let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!(null==e||"number"==typeof e&&isNaN(e)||t.includes(e))}},74593:function(e,t,r){"use strict";r.d(t,{W:function(){return a}});var o=r(7451);let n={caseSensitive:!1,wrapper:"<strong>$1</strong>"};function a(e,t,r){r={...n,...r};let a=(0,o.B)(e.replace(/\(|\)/g,"")).trim();return a?t.replace(new RegExp("(".concat(a,")"),r.caseSensitive?"gm":"igm"),r.wrapper||"").replace(/\s/g,"&nbsp;"):t}},96287:function(e,t,r){"use strict";r.d(t,{U:function(){return n}});var o=r(73044);function n(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return Object.entries(e).reduce((e,r)=>{let[n,a]=r;return""===a||!(0,o.W)(a)||!t&&Array.isArray(a)&&!a.some(e=>""!==e)?e:{...e,[n]:a}},{})}},39160:function(e,t,r){"use strict";r.d(t,{D:function(){return o}});let o=e=>{let{currentPage:t,amountOfPagesShown:r,total:o,limit:n,mapper:a}=e,i=[],s=Math.floor(r/2),l=Math.ceil(o/n),c=l-1;for(let e=1;e<=l;e++)i.push(a(e));if(t<=s)i=i.slice(0,r);else{let e=t+s-1,o=t-s-1;e>c&&(o-=e-c),r%2==0&&(o+=1),o=o<0?0:o,i=i.slice(o,e+1)}return i}},7451:function(e,t,r){"use strict";function o(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}r.d(t,{B:function(){return o}})},98575:function(e,t,r){"use strict";r.d(t,{k:function(){return a}});let o=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=RegExp(/'(s|re|ve|t|d|ll|m)?/,"i"),a=(e,t)=>r=>{let a=[],s=r.trim(),l=s.split(/\s|\b/),c=s.split(""),u=RegExp("\\b".concat(o(s),"\\b"),"i"),h=s.length>3?c.flatMap((e,t)=>c.slice(t+1).map(t=>"".concat(e).concat(t))):[];return e.forEach(e=>{let r=t(e),o=r.replace(n,""),c=r.search(u);if(c>=0)a.push({match:e,score:0===c?1.1:1});else if(o.search(u)>=0)a.push({match:e,score:.9});else{let t=i({tokens:l,refineText:o,searchStr:s,searchStrCombination:h});t>0&&a.push({match:e,score:Math.round((t/l.length+Number.EPSILON)*100)/100})}}),a.filter(e=>e.score>=.1).sort((e,t)=>t.score-e.score)},i=e=>{let{tokens:t,refineText:r,searchStr:n,searchStrCombination:a}=e,i=t.reduce((e,t)=>e+=s(t,r),0);return 0===i&&n.length>1&&r.match(RegExp("".concat(o(n)),"i"))&&(i+=.2),i+a.reduce((e,t)=>e+=l(t,r,i>0?.008:.05),0)},s=(e,t)=>{let r=0,n=o(e),a=RegExp("\\b".concat(n,"\\b"),"i"),i=RegExp("^".concat(n),"i"),s=RegExp("\\b".concat(n),"i");if(a.test(t)){var l;r+=(null===(l=t.match(a))||void 0===l?void 0:l.index)===0?1.1:1}else i.test(t)?r+=.6:s.test(t)&&(r+=.5);return r},l=(e,t,r)=>t.match(RegExp("".concat(o(e)),"i"))?r:0},58721:function(e,t,r){"use strict";r.d(t,{$:function(){return i},W:function(){return s}});var o=r(45962),n=r(89027),a=r(3400);let i=e=>{let t=a.a.search(e,n.e.locationAutocompleteCount);return t.then(e=>Array.isArray(e)?e.map(e=>({value:e.id,label:[e.a?e.a:e.n,e.p_n?" (".concat(e.p_n,")"):""].join("")})):[]).catch(()=>[])},s=e=>{let t=o.f.search(e,n.e.agentAutocompleteCount);return t.then(e=>Array.isArray(e)?e.map(e=>({value:e.i,label:e.n})):[]).catch(()=>[])}},45962:function(e,t,r){"use strict";let o;r.d(t,{f:function(){return f}});var n=r(82058),a=r(7451);let i="AgentAutocompleteStore: ",s=console.error.bind(null,i);class l{search(e,t){if(this.agents.length){let r=[],o=(0,a.B)(e).trim();if(!o)return Promise.resolve(r);let n=RegExp(o,"gi");for(let e of this.agents)if(e.n.match(n)&&r.push(e),r.length===t)break;return Promise.resolve(r)}return this.dataLoadingInProgress||this.loadData(this.getEtag(),this.updateEtag),this.fetchSearch({locale:this.locale,query:{q:e,limit:t},serially:!0}).then(e=>e.ok?e.data:(s(i,"fetch agents for query failed",e.error),[]))}find(e){return this.agents.length||console.warn(i,"store is empty!!!"),this.agents.find(e)||null}findById(e){if(this.agents.length){let t=this.agents.find(t=>t.i===e);return Promise.resolve(t||null)}return this.dataLoadingInProgress||this.loadData(this.getEtag(),this.updateEtag),this.fetchSearch({locale:this.locale,query:{q:e}}).then(e=>{var t;return e.ok?null===(t=e.data)||void 0===t?void 0:t[0]:(s(i,"fetch filtered locations failed",e.error),null)})}loadData(e,t){this.dataLoadingInProgress=!0,this.fetchAgentsEtag({locale:this.locale,query:{locale:this.locale}}).then(r=>{if(!r.ok){this.dataLoadingInProgress=!1,s(i,"fetch agents for etag failed",r.error);return}this.fetchAllAgents({reloadCache:e!==r.headers.get("etag"),locale:this.locale,query:{locale:this.locale}}).then(e=>{if(this.dataLoadingInProgress=!1,!e.ok){s(i,"fetch all agents failed",e.error,Date.now());return}this.agents=e.data;let r=e.headers.get("etag");r&&t(r)}).catch(()=>this.dataLoadingInProgress=!1)}).catch(()=>this.dataLoadingInProgress=!1)}constructor(e,t,r,o,n){this.locale=r,this.agents=[],this.dataLoadingInProgress=!1,this.getEtag=e,this.updateEtag=t,this.fetchAllAgents=o({method:"GET",url:"agents/list",handledByPfWebApp:!0}),this.fetchAgentsEtag=o({method:"HEAD",url:"agents/list",handledByPfWebApp:!0}),this.fetchSearch=o({method:"GET",url:"agents/search",handledByPfWebApp:!0}),n.has("fetchLocationOnLoad")&&this.loadData(this.getEtag(),this.updateEtag)}}var c=r(59462);let u=e=>"locations-etag-".concat(e),{localStorage:h}=c.WindowService,d="AgentAutocompleteService: ",g=console.error.bind(null,d),f={init:(e,t)=>{o||(o=new l(()=>h.getItem(u(e)),t=>h.setItem(u(e),t),e,n.h,t))},search:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return o?o.search(e,t):(g(d,"agent was not initialized."),Promise.resolve([]))},find:e=>o?o.find(e):(g(d,"agentAutocompleteStore was not initialized. put",Date.now()),null),findById:e=>o?o.findById(e):(g(d,"agentAutocompleteStore was not initialized."),Promise.resolve(null))}},79159:function(e,t,r){"use strict";r.d(t,{y:function(){return o}});let o=e=>{let t=e.find(e=>null==e?void 0:e.value);return t||{label:"",value:""}}},94470:function(e,t,r){"use strict";r.d(t,{b:function(){return n}});var o=r(2784);let n=(e,t)=>{let r=(0,o.useRef)(!0),[n,a]=(0,o.useState)(0),[i,s]=(0,o.useState)(e);return(0,o.useEffect)(()=>{r.current||t(i),r.current=!1},[n]),[i,s,e=>{s(e),a(Math.random())}]}},59350:function(e,t,r){"use strict";r.d(t,{B:function(){return a}});var o=r(39334),n=r(29480);let a=(e,t,r)=>{let a=new URLSearchParams;Object.entries(t).forEach(e=>{let[t,r]=e;("page"!==t||"1"!==r)&&a.append(t,r)});let i=(0,o.U)({locale:n.O.getLocale(),path:e,relative:!0,countryConfigs:r});return"".concat(i).concat(a.toString()?"?".concat(a.toString()):"")}},91979:function(e,t,r){"use strict";r.d(t,{r:function(){return o}});let o=(e,t,r)=>({pagination:{pageCurrent:e,itemPerPage:r,itemTotal:t}})},54461:function(e,t,r){"use strict";r.d(t,{Y:function(){return s}});var o=r(52322),n=r(2784),a=r(3241);let i=async(e,t)=>await Promise.all(t.map(async t=>{try{let r=await t.request(e);return{groupName:t.groupName,options:r,id:t.id}}catch(e){return console.error("Autocomplete loader: ","Failed to request autocomplete for `%s` with error:",t.groupName,e),{groupName:t.groupName,options:[],id:t.id}}})),s=e=>{let{placeholder:t,className:r,onSelect:s,suggestionRequesters:l,suggestionIcon:c,value:u,onQueryChange:h,template:d}=e,[g,f]=(0,n.useState)(!1),[p,_]=(0,n.useState)(u?u.label:""),[m,E]=(0,n.useState)([]),[v,y]=(0,n.useState)(!1),A=d||a.O,I=(0,n.useCallback)((e,t)=>{_(e.label),t?s(e,p,t):h(p)},[]),S=(0,n.useCallback)(()=>{i(p,l).then(e=>{E(e)})},[p]),b=(0,n.useCallback)(e=>{_(e),h(e)},[p]),P=(0,n.useCallback)(()=>{I({label:"",value:""},"")},[p]);return(0,n.useEffect)(()=>{S()},[p]),(0,n.useEffect)(()=>{_((null==u?void 0:u.label)||"")},[null==u?void 0:u.value]),(0,o.jsx)(A,{onActive:e=>f(e),isActive:g,value:p,placeholder:t,onQueryChange:b,requestAutocompletion:S,suggestions:m,onSelect:I,className:r,suggestionIcon:c,onPreserveDropdownOpen:e=>y(e),preserveDropdownOpen:v,onClear:P,onApply:()=>{s({label:p,value:p},p,"")}})}},3241:function(e,t,r){"use strict";r.d(t,{O:function(){return p}});var o=r(52322),n=r(34541),a=r(4519),i=r(2784),s=r(93131),l=r(17893),c=r(74593),u=r(26281),h=r.n(u);let d=e=>{let{suggestions:t,onOptionClick:r,suggestionIcon:n,userInput:a}=e,s=(0,i.useCallback)((e,t)=>(0,o.jsx)(o.Fragment,{children:e.map(e=>(0,o.jsxs)("button",{className:h().suggestion,type:"button",onClick:()=>r(e,t),"data-testid":"autocomplete-option-".concat(e.value),children:[n&&(0,o.jsx)("span",{className:h().suggestion__icon,children:n}),(0,o.jsx)(l.Z,{as:"span",className:h().suggestion__text,text:(0,c.W)(a,e.label)})]},e.value))}),[r,a,n]),u=(0,i.useCallback)(()=>t.map((e,t)=>e.options.length?e.groupName?(0,o.jsxs)("div",{className:h().group,children:[(0,o.jsx)("p",{className:h().group__name,children:e.groupName}),(0,o.jsx)("div",{className:h().group__options,children:s(e.options,e.id)})]},e.groupName):(0,o.jsx)(i.Fragment,{children:s(e.options,"")},t):null),[t,s]);return(0,o.jsx)(o.Fragment,{children:u()})};var g=r(71491),f=r.n(g);let p=e=>{let{value:t,suggestions:r,className:l,placeholder:c,onSelect:u,suggestionIcon:h,requestAutocompletion:g,onQueryChange:p,isActive:_,onActive:m,preserveDropdownOpen:E,onPreserveDropdownOpen:v,onClear:y}=e,A=(0,i.useRef)(null),I=(0,i.useCallback)(e=>{e.key===s.Y.ENTER&&e.target.value&&(u({label:e.target.value,value:e.target.value},"text"),v(!1),m(!1))},[u,v,m]),S=(0,i.useCallback)(e=>{p(e.target.value)},[p]),b=(0,i.useCallback)(()=>{g(),m(!0),v(!1)},[g,m,v]),P=(0,i.useCallback)(()=>{m(!1)},[m]),N=(0,i.useCallback)(()=>{var e;null==y||y(),null===(e=A.current)||void 0===e||e.focus()},[y]),w=(0,i.useCallback)((e,t)=>{u(e,t),v(!1)},[u,v]),O=(0,i.useMemo)(()=>r.reduce((e,t)=>e+t.options.length,0)>0&&_||E,[r,_,E]);return(0,o.jsx)("div",{"data-testid":"autocomplete-template",className:f().root,children:(0,o.jsxs)("div",{className:(0,n.domClassMerge)(f().container,{[f()["container--active"]]:_},l),children:[(0,o.jsx)(a.IconMagnifierThick,{className:f()["search-icon"]}),(0,o.jsx)("input",{value:t,className:f().input,placeholder:c,onInput:S,onKeyDown:I,onFocus:b,onBlur:P,autoComplete:"off",ref:A,"data-testid":"autocomplete-input"}),t&&(0,o.jsx)("button",{className:f()["input__cross-button"],"data-testid":"autocomplete-clear",onClick:N,children:(0,o.jsx)(a.IconTimesSmallThick,{})}),O&&(0,o.jsx)("div",{className:f().dropdown,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),"data-testid":"autocomplete-dropdown",children:(0,o.jsx)(d,{suggestions:r,onOptionClick:w,suggestionIcon:h,userInput:t})})]})})}},3400:function(e,t,r){"use strict";let o;r.d(t,{a:function(){return c}});var n=r(82058),a=r(7451),i=r(98575);class s{search(e,t){if(this.locations.length){let r=this.prepareSearchString(e),o=this.createSearchRegExp(r);if(!r)return Promise.resolve([]);let n=this.performSearch(o,t);return Promise.resolve(n)}return(this.locationLoadingInProgress||this.loadLocations(this.getEtag(),this.updateEtag),this.shouldSearchOnline)?this.fetchLocationsForQuery({locale:this.locale,query:{"filter[full_name]":e,"page[limit]":t},serially:!0}).then(e=>e.ok?e.data:(console.error("fetch locations for query failed",e.error),[])):Promise.resolve([])}prepareSearchString(e){return(0,a.B)(e.replace(/\(|\)/g,"")).trim()}createSearchRegExp(e){return RegExp("\\s\\(*".concat(e,"[^\\s]*|^\\(*").concat(e,"[^\\s]*"),"gi")}performSearch(e,t){let r=[];for(let o of this.locations){let n=[o.a||"",o.n].join(" ").trim();if(n.match(e)&&r.push(o),r.length===t)break}return r}findByQuery(e){let{searchString:t,predicate:r=()=>!0}=e;if(!this.locations.length)return console.error("fetch all locations failed"),[];let o=(0,i.k)(this.locations.filter(r),e=>e.n)(t);return o.map(e=>e.match)}find(e){return this.locations.length?this.locations.find(e):(console.error("fetch all locations failed"),null)}findById(e){return this.locations.length?Promise.resolve(this.locations.find(t=>t.id===e)):(this.locationLoadingInProgress||this.loadLocations(this.getEtag(),this.updateEtag),this.fetchAllLocations({locale:this.locale,query:{id:e}}).then(t=>{if(!t.ok){console.error("fetch filtered locations failed",t.error);return}if(0===t.data.length)return;let r=t.data[0];return r.id===e?r:t.data.find(t=>t.id===e)}))}loadLocations(e,t){this.locationLoadingInProgress=!0,this.fetchLocationsEtag({locale:this.locale}).then(r=>{if(!r.ok){this.locationLoadingInProgress=!1,console.error("fetch locations for etag failed",r.error);return}this.fetchAllLocations({reloadCache:e!==r.headers.get("etag"),locale:this.locale}).then(e=>{if(this.locationLoadingInProgress=!1,!e.ok){console.error("fetch all locations failed",e.error);return}this.locations=e.data;let r=e.headers.get("etag");r&&t(r)}).catch(()=>this.locationLoadingInProgress=!1)}).catch(()=>this.locationLoadingInProgress=!1)}constructor(e,t,r,o,n,a,i,s,l){this.locale=r,this.locations=[],this.locationLoadingInProgress=!1,this.locationTypes=[],this.shouldSearchOnline=!0,this.locationTypes=a||[],this.getEtag=e,this.updateEtag=t,this.shouldSearchOnline=!1!==l,this.fetchAllLocations=o({method:"GET",url:"location/list",handledByPfWebApp:!0,queryDefaultParams:{...a&&a.length>0&&{l_t:a.join(",")},...i&&{c:i},...s&&{ins:!0}}}),this.fetchLocationsEtag=o({method:"HEAD",url:"location/list",handledByPfWebApp:!0,queryDefaultParams:{...a&&a.length>0&&{l_t:a.join(",")},...i&&{c:i},...s&&{ins:!0}}}),this.fetchLocationsForQuery=o({method:"GET",url:"location/search",handledByPfWebApp:!0,queryDefaultParams:{...a&&a.length>0&&{l_t:a.join(",")},...i&&{c:i},...s&&{ins:!0}}}),n.has("fetchLocationOnLoad")&&this.loadLocations(this.getEtag(),this.updateEtag)}}let l=e=>"locations-etag-".concat(e),c={init:(e,t,r,a,i,c)=>{o||(o=new s(()=>localStorage.getItem(l(e)),t=>localStorage.setItem(l(e),t),e,n.h,t,r||[],a,i,c))},search:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return o?o.search(e,t):(console.error("locationsStore was not initialized."),Promise.resolve([]))},find:e=>o?o.find(e):(console.error("locationsStore was not initialized."),null),findById:e=>o?o.findById(e):(console.error("locationsStore was not initialized."),Promise.resolve()),findByQuery:e=>o?o.findByQuery(e):(console.error("locationsStore was not initialized."),[]),destroy:()=>{o=void 0}}},6166:function(e,t,r){"use strict";r.d(t,{x:function(){return g}});var o,n,a=r(60663),i=r(56506),s=r(84033),l=r(45573);(o=n||(n={})).COOKIE="flagship_user_id",o.HEADER="x-flagship-user-id";var c=r(37791),u=r(29480),h=r(74666);let d=function(){let{pageCategory:e=c.c.ANCILLARY_PAGE,pageType:t=h.e.OTHER,extraParams:r={},featureFlags:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isBrowser:a}=(0,s.c1)(),i=u.O.getLocale(),d="";a&&(d=(0,l.V)()[n.COOKIE]),(null==o?void 0:o.has("tealium"))&&a&&window.tealium&&window.utag_data&&["tealium","utag_data"].forEach(o=>{window[o].page_category=e,window[o].page_type=t,window[o].page_lang=i,r&&Object.keys(r).forEach(e=>{window[o][e]=r[e]}),d&&(window[o].flagship_visitor_id=d)})},g=e=>{let{featureFlags:t}=(0,i.A)();(0,a.m)(()=>{d({...e,featureFlags:t})})}},71491:function(e){e.exports={root:"styles_desktop_root__bk_i0",container:"styles_desktop_container__BBlj_","container--active":"styles_desktop_container--active__QdArT",input:"styles_desktop_input__3q4qB","input__cross-button":"styles_desktop_input__cross-button__R6I56","search-icon":"styles_desktop_search-icon__8r7rN",dropdown:"styles_desktop_dropdown__6R78t"}},26281:function(e){e.exports={suggestion:"styles_suggestion__jFEgE",suggestion__icon:"styles_suggestion__icon___Ff_4",suggestion__text:"styles_suggestion__text__fcdgd",group:"styles_group__qeh5f",group__name:"styles_group__name__XB1dQ",group__options:"styles_group__options__W0AT5"}}}]);